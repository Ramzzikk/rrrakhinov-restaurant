# Система Управления Заказами в Ресторане

**Обратите внимание:** Для тестирования API необходимо использовать Postman.

## Обзор
API управляется тремя контроллерами:
- **UserController**: Управление регистрацией, входом, выходом пользователей, получение информации о текущем пользователе и просмотр списка блюд (доступен по адресу `/api/user`).
- **AdminController**: Управление действиями администратора, такими как добавление и удаление блюд в меню, а также генерация статистики ресторана (например, список блюд по популярности, средняя оценка блюд, количество заказов за определенный период) (доступен по адресу `/api/admin`).
- **VisitorController**: Управление действиями посетителей, такими как создание, расширение, оплата и отмена заказов, а также предоставление отзывов по завершенным заказам (доступен по адресу `/api/visitor`).

Для выполнения действий требуется аутентификация пользователя. Попытка выполнить действие без входа в систему приведет к ошибке. За один сеанс допускается только один пользователь.
Для просмотра текущего залогиненного пользователя можно использовать **GET-запрос** по адресу `localhost:8080/api/user/getCurrentUser`. Просмотр текущего меню без входа в систему также возможен через **GET-запрос** по адресу `localhost:8080/api/user/getDishes`.

## Регистрация, Вход и Выход
- **Регистрация**: Выполните **POST-запрос** на `localhost:8080/api/user/signUp` с указанием следующих **Query Params**: `username` (String), `password` (String), `type` (admin или visitor).
- **Вход**: Выполните **GET-запрос** на `localhost:8080/api/user/signIn` с указанием следующих **Query Params**: `username` (String), `password` (String), `type` (admin или visitor).
- **Выход**: Выполните **DELETE-запрос** на `localhost:8080/api/user/logOut` с указанием следующих **Query Params**: `username` (String), `password` (String), `type` (admin или visitor).

Каждый метод возвращает сообщение о статусе выполнения. В случае ошибки будет указано, что пошло не так.

## Администратор
Авторизованный администратор может выполнить следующие запросы:
- **Создание блюда**: **POST-запрос** на `localhost:8080/api/admin/createDish` с указанием `name` (String), `description` (String), `price` (BigDecimal), `minutesToCook` (Int) в качестве **Query Params**.
- **Удаление блюда**: **DELETE-запрос** на `localhost:8080/api/admin/deleteDish` с такими же параметрами, как и при создании блюда.
- **Получение текущего дохода ресторана**: **GET-запрос** на `localhost:8080/api/admin/getRevenue`.
- **Получение списка блюд, отсортированных по популярности**: **GET-запрос** на `localhost:8080/api/admin/getDishesSortedByPopularity`.
- **Получение средней оценки заказов**: **GET-запрос** на `localhost:8080/api/admin/getAverageAssessment`.
- **Получение всех заказов за определенный период**: **GET-запрос** на `localhost:8080/api/admin/getAllOrdersInPeriod` с указанием `start` и `end` в качестве **Query Params** (LocalTime).

В случае ошибки возвращается подробное сообщение об ошибке.

## Посетитель
Авторизованный пользователь может выполнить следующие запросы:
- **Создание заказа**: **POST-запрос** на `localhost:8080/api/visitor/createOrder` с указанием `dishId` (Int) в качестве **Query Params** для каждого блюда в заказе.
- **Расширение существующего заказа**: **PUT-запрос** на `localhost:8080/api/visitor/expandOrder` с указанием `dishId` (Int) в качестве **Query Params**. Предполагается, что у пользователя может быть только один активный заказ.
- **Отмена существующего заказа**: **DELETE-запрос** на `localhost:8080/api/visitor/cancelOrder`.
- **Оплата завершенного заказа**: **POST-запрос** на `localhost:8080/api/visitor/payOrder` с указанием `orderId` (Int) и `sum` (BigDecimal) в качестве **Query Params**. Если сумма платежа превышает итоговую стоимость заказа, излишек считается чаевыми. В случае недостаточной суммы платежа будет выведено сообщение об ошибке.
- **Оставление отзыва на завершенный заказ**: **POST-запрос** на `localhost:8080/api/visitor/giveFeedback` с указанием `orderId` (Int), `assessment` (от 1 до 5) и `text` (String) в качестве **Query Params**.

В случае ошибки возвращается сообщение об ошибке.

## Примечания
- Все строки, вводимые пользователем, не должны превышать 255 символов.
- Обработка заказов происходит в многопоточном режиме, симулируя время приготовления, где 1 минута приготовления равна 1 секунде реального времени.
